# Changelog

## 17.0.0-next.3

### Major Changes

- 8816220: Update ver

### Patch Changes

- Updated dependencies [8816220]
  - @wdcthemes/babel-preset-default@3.0.0-next.2
  - @wdcthemes/stylelint-config@7.0.0-next.2
  - @wdcthemes/eslint-config@4.0.0-next.2

## 17.0.0-next.2

### Minor Changes

- 0b7117c: update

### Patch Changes

- Updated dependencies [0b7117c]
  - @wdcthemes/babel-preset-default@2.2.0-next.1
  - @wdcthemes/stylelint-config@7.0.0-next.1
  - @wdcthemes/eslint-config@3.2.0-next.1

## 17.0.0-next.1

### Minor Changes

- 38d3935: Bump ver

## 17.0.0-next.0

### Major Changes

- 59ad2da: Bump versions

### Patch Changes

- Updated dependencies [59ad2da]
  - @wdcthemes/stylelint-config@7.0.0-next.0
  - @wdcthemes/babel-preset-default@2.2.0-next.0
  - @wdcthemes/eslint-config@3.2.0-next.0

## 16.0.0

### Major Changes

- db1b3c2: update default value of `useBlockAssets` to true. If you are not ready for it yet. Set `useBlockAssets` to false in your 10up-toolkit `package.json` config.

  ```json
  {
    "name": "your-project",
    "wdc-toolkit": {
      "useBlockAssets": false
    }
  }
  ```

### Minor Changes

- db1b3c2: Add support to configure Webpack's publicPath

### Patch Changes

- db1b3c2: Add `.local` to the default list of supported domains.
- db1b3c2: Stop using react fast refresh fork in favor of the upstream package
- 0ccb748: Update linaria to next major and fix an issue with react-refresh plugin. Also drops support for node 14.

- Updated dependencies [db1b3c2]
  - @wdcthemes/stylelint-config@6.0.0

## 15.0.0

### Major Changes

- 34c75d7: update default value of `useBlockAssets` to true. If you are not ready for it yet. Set `useBlockAssets` to false in your 10up-toolkit `package.json` config.

  ```json
  {
    "name": "your-project",
    "wdc-toolkit": {
      "useBlockAssets": false
    }
  }
  ```

- 34c75d7: Update linaria to next major and fix an issue with react-refresh plugin. Also drops support for node 14.

### Minor Changes

- 34c75d7: Add support to configure Webpack's publicPath

### Patch Changes

- 34c75d7: Add `.local` to the default list of supported domains.
- 34c75d7: Stop using react fast refresh fork in favor of the upstream package
- Updated dependencies [34c75d7]
  - @wdcthemes/stylelint-config@5.0.0

## 14.0.0

### Major Changes

- 0ccb748: update default value of `useBlockAssets` to true. If you are not ready for it yet. Set `useBlockAssets` to false in your 10up-toolkit `package.json` config.

  ```json
  {
    "name": "your-project",
    "wdc-toolkit": {
      "useBlockAssets": false
    }
  }
  ```

- 0ccb748: Update linaria to next major and fix an issue with react-refresh plugin. Also drops support for node 14.

### Minor Changes

- 0ccb748: Add support to configure Webpack's publicPath

### Patch Changes

- 0ccb748: Add `.local` to the default list of supported domains.
- 0ccb748: Stop using react fast refresh fork in favor of the upstream package
- Updated dependencies [0ccb748]
  - @wdcthemes/stylelint-config@4.0.0

## 10.0.0

### Major Changes

- aa08ead: update default value of `useBlockAssets` to true. If you are not ready for it yet. Set `useBlockAssets` to false in your wdc-toolkit `package.json` config.

  ```json
  {
    "name": "your-project",
    "wdc-toolkit": {
      "useBlockAssets": false
    }
  }
  ```

- aa08ead: Update linaria to next major and fix an issue with react-refresh plugin. Also drops support for node 14.

### Minor Changes

- aa08ead: Add support to configure Webpack's publicPath

### Patch Changes

- aa08ead: Add `.local` to the default list of supported domains.
- aa08ead: Stop using react fast refresh fork in favor of the upstream package

## 9.0.0

### Major Changes

- aa08ead: update default value of `useBlockAssets` to true. If you are not ready for it yet. Set `useBlockAssets` to false in your wdc-toolkit `package.json` config.

  ```json
  {
    "name": "your-project",
    "wdc-toolkit": {
      "useBlockAssets": false
    }
  }
  ```

- aa08ead: Update linaria to next major and fix an issue with react-refresh plugin. Also drops support for node 14.

### Minor Changes

- aa08ead: Add support to configure Webpack's publicPath

### Patch Changes

- aa08ead: Add `.local` to the default list of supported domains.
- aa08ead: Stop using react fast refresh fork in favor of the upstream package

## 8.0.0

### Major Changes

- aa08ead: update default value of `useBlockAssets` to true. If you are not ready for it yet. Set `useBlockAssets` to false in your wdc-toolkit `package.json` config.

  ```json
  {
    "name": "your-project",
    "wdc-toolkit": {
      "useBlockAssets": false
    }
  }
  ```

- aa08ead: Update linaria to next major and fix an issue with react-refresh plugin. Also drops support for node 14.

### Minor Changes

- aa08ead: Add support to configure Webpack's publicPath

### Patch Changes

- aa08ead: Add `.local` to the default list of supported domains.
- aa08ead: Stop using react fast refresh fork in favor of the upstream package

## 7.0.0

### Major Changes

- aa08ead: update default value of `useBlockAssets` to true. If you are not ready for it yet. Set `useBlockAssets` to false in your wdc-toolkit `package.json` config.

  ```json
  {
    "name": "your-project",
    "wdc-toolkit": {
      "useBlockAssets": false
    }
  }
  ```

- aa08ead: Update linaria to next major and fix an issue with react-refresh plugin. Also drops support for node 14.

### Minor Changes

- aa08ead: Add support to configure Webpack's publicPath

### Patch Changes

- aa08ead: Add `.local` to the default list of supported domains.
- aa08ead: Stop using react fast refresh fork in favor of the upstream package
- Updated dependencies [aa08ead]
  - @wdcthemes/stylelint-config@3.0.0

## 6.0.0

### Major Changes

- aa08ead: update default value of `useBlockAssets` to true. If you are not ready for it yet. Set `useBlockAssets` to false in your wdc-toolkit `package.json` config.

  ```json
  {
    "name": "your-project",
    "wdc-toolkit": {
      "useBlockAssets": false
    }
  }
  ```

- aa08ead: Update linaria to next major and fix an issue with react-refresh plugin. Also drops support for node 14.

### Minor Changes

- aa08ead: Add support to configure Webpack's publicPath

### Patch Changes

- aa08ead: Add `.local` to the default list of supported domains.
- aa08ead: Stop using react fast refresh fork in favor of the upstream package

## 6.0.0-next.0

### Major Changes

- aa08ead: update default value of `useBlockAssets` to true. If you are not ready for it yet. Set `useBlockAssets` to false in your wdc-toolkit `package.json` config.

  ```json
  {
    "name": "your-project",
    "wdc-toolkit": {
      "useBlockAssets": false
    }
  }
  ```

- aa08ead: Update linaria to next major and fix an issue with react-refresh plugin. Also drops support for node 14.

### Minor Changes

- aa08ead: Add support to configure Webpack's publicPath

### Patch Changes

- aa08ead: Add `.local` to the default list of supported domains.
- aa08ead: Stop using react fast refresh fork in favor of the upstream package

## 5.2.2

### Patch Changes

- d3ea57e: install @wordpress/eslint-plugin in toolkit by default

## 5.2.2-next.0

### Patch Changes

- d3ea57e: install @wordpress/eslint-plugin in toolkit by default
- Updated dependencies [b172081]
  - @wdcthemes/stylelint-config@2.0.5-next.0

## 5.2.1

### Patch Changes

- a930021: Fix: prettier peerDependency range
- d3e6078: fix coply all php files inside the blocks directory into dist

## 5.2.1-next.1

### Patch Changes

- a930021: Fix: prettier peerDependency range
- Updated dependencies [a930021]
  - @wdcthemes/eslint-config@3.1.1

## 5.2.1-next.0

### Patch Changes

- d3e6078: fix coply all php files inside the blocks directory into dist

## 5.2.0

### Minor Changes

- f3122e4: Updating several dependencies
  Better error messages when svg parsing fails

## 5.1.0

### Minor Changes

- 799afd5: Introduce support for Linaria (css-in-js) in toolkit.
- b682822: maybe insert style version hash to dist block.json files

### Patch Changes

- 7ee697b: Ensuring stylelint supports SCSS in a separate ruleset
- cb5d528: Fix: checking chunk path for block decision.
  Fix: Windows related issues
- Updated dependencies [7ee697b]
  - @wdcthemes/stylelint-config@2.0.4

## 5.1.0-next.0

### Minor Changes

- 799afd5: Introduce support for Linaria (css-in-js) in toolkit.
- b682822: maybe insert style version hash to dist block.json files

### Patch Changes

- 7ee697b: Ensuring stylelint supports SCSS in a separate ruleset
- cb5d528: Fix: checking chunk path for block decision.
  Fix: Windows related issues
- Updated dependencies [7ee697b]
  - @wdcthemes/stylelint-config@2.0.4-next.0

## 5.0.0

### Patch Changes

- Updated dependencies [0f29b56]
  - @wdcthemes/eslint-config@3.0.0
  - @wdcthemes/babel-preset-default@2.0.4
  - @wdcthemes/stylelint-config@2.0.3

## 4.3.1

### Patch Changes

- 010cea6: Fix processing order whenever Sass is used
- Updated dependencies [010cea6]
  - @wdcthemes/babel-preset-default@2.0.4
  - @wdcthemes/eslint-config@2.4.7
  - @wdcthemes/stylelint-config@2.0.2

## 4.3.0

### Minor Changes

- 45d73c4: Introduce `--include` option to instruct toolkit to transpile the specified package
- 45d73c4: Add "none" format. Allowing to use "project mode" without producing a bundle that needs to be consumed through another bundler.

### Patch Changes

- 45d73c4: Improve Sass compatibility by making sure PostCSS runs after Sass has finished and also ensuring that PostCSS process the Sass pipeline.

  Fixes #198
  Fixes #228

- 45d73c4: Forks webpack-remove-empty-script into wdc-toolkit and remove the ansis dependency.

## 4.3.0-next.0

### Minor Changes

- c2298c3: Introduce `--include` option to instruct toolkit to transpile the specified package
- 24a50b8: Add "none" format. Allowing to use "project mode" without producing a bundle that needs to be consumed through another bundler.

### Patch Changes

- c7ddd46: Improve Sass compatibility by making sure PostCSS runs after Sass has finished and also ensuring that PostCSS process the Sass pipeline.

  Fixes #198
  Fixes #228

- aec9ac4: Forks webpack-remove-empty-script into wdc-toolkit and remove the ansis dependency.

## 4.2.2

### Patch Changes

- 80e858f: fix how block editor styles get handled if useBlockAssets option is not set

## 4.2.2-next.1

### Patch Changes

- 80e858f: fix how block editor styles get handled if useBlockAssets option is not set

## 4.2.1

### Patch Changes

- 8bbd562: fix regression in block file names in dist folder if useBlockAssets option is not set

## 4.2.1-next.0

### Patch Changes

- 8bbd562: fix regression in block file names in dist folder if useBlockAssets option is not set

## 4.2.0

### Minor Changes

- 2e67b06: Replaces `squoosh` with a custom implementation using `sharp` for optimizing images.
- d60ce6c: Refine the way block assets get handled. wdc-toolkit will now create Webpack entrypoints for any assets that are defined in any block.json files automatically for you. So no need to manually adding manual entrypoints per block.

### Patch Changes

- bc89638: Fix how webpack handles addition of new block.json files during watch mode

## 4.2.0-next.2

### Minor Changes

- 2e67b06: Replaces `squoosh` with a custom implementation using `sharp` for optimizing images.

## 4.2.0-next.1

### Patch Changes

- bc89638: Fix how webpack handles addition of new block.json files during watch mode

## 4.2.0-next.0

### Minor Changes

- d60ce6c: Refine the way block assets get handled. wdc-toolkit will now create Webpack entrypoints for any assets that are defined in any block.json files automatically for you. So no need to manually adding manual entrypoints per block.

## 4.1.2

### Patch Changes

- 64134a9: Adding unmissable notice (error) when using HMR and SCRIPT_DEBUG is not set to true

  The recommended way of including the `fast-refresh.php` file is now the following:

  ```php
  $is_local_env = in_array( wp_get_environment_type(), [ 'local', 'development' ], true );
  $is_local_url = strpos( home_url(), '.test' ) || strpos( home_url(), '.local' );
  $is_local     = $is_local_env || $is_local_url;

  if ( $is_local && file_exists( __DIR__ . '/dist/fast-refresh.php' ) ) {
  	require_once __DIR__ . '/dist/fast-refresh.php';
  	WDCToolkit\set_dist_url_path( basename( __DIR__ ), WDC_THEME_DIST_URL, WDC_THEME_DIST_PATH );
  }
  ```

- 86d68ac: Update `devServer` so the overlay only shows up on errors.
  Update `StyleLintPlugin` so it sets `failOnError` to `false`, similarly to `EslintPlugin`.

## 4.1.1

### Patch Changes

- da9c394: Treat js files inside `block` or `blocks` directories as blocks.

## 4.1.0

### Minor Changes

- c206d75: Remove grid autoprefixer.
- f33afc6: Fix react-refresh-runtime entrypoint

### Patch Changes

- @wdcthemes/babel-preset-default@2.0.3
- @wdcthemes/eslint-config@2.4.6
- @wdcthemes/stylelint-config@2.0.1

## 4.1.0-next.2

### Minor Changes

- c206d75: Remove grid autoprefixer.
- f33afc6: Fix react-refresh-runtime entrypoint

All notable changes to this project will be documented in this file, per [the Keep a Changelog standard](http://keepachangelog.com/).

## 4.0.0

- Changed: wdc-toolkit no longer transpiles `@wdcthemes/block-components`. Make sure to use the latest version of `@wdcthemes/block-components` that already ships transpiled code.
- Changed [BREAKING CHANGE]: Stop injecting `wp-polyfill` as dependecy of scripts built by wdc-toolkit.
- Updated: Dependencies
- Changed [BREAKING CHANGE]: Stylelint and eslint are now peerDependencies. This is a breaking change only for those not using npm >= 7.

## 3.1.0

- Fixed: `dev-server` flag
- Added: `--target` option
- Added: Basic support for `exports` package.json field in package mode.

## 3.0.3

- Changed - Updated `@wordpress/eslint-plugin` to 11.0.0 to resolved an issue with conflicting prettier deps.

## 3.0.2

- Reverted - WDC eslint plugin

## 3.0.0

- Added - Introduced the `--analyze` option to the build to enable webpack-bundle-analyzer
- Added - Introduced HMR and React Fast Refresh
- Added - Introduced `WDCToolkitTscPlugin` that runs tsc both on build and watch if tsconfig.json is present.
- Changed - Eslint and stylelint now only lint changed files when building with webpack (lintDirtyModulesOnly)
- Changed - Replaced `imagemin-webpack-plugin` with `image-minimizer-webpack-plugin`
- Changed - Droped `imagemin` in favor of `squoosh`
- Changed - Updated `@svgr/webpack` to 6.2.1 and removed `postcss-object-fit-image` as it's not necessary.
- Deprecated - BrowserSync

## 2.1.0

- Fix double dot issue in CopyWebpack plugin
- Stop removing viewbox in svgs.
- Added `.ico` and `.otf` files to be copied via copy-webpack-plugin.
- Updated eslint-config and eslint to 8.

## 2.0.0

- Updated several dependencies.
- Updated to postcss-preset-env 7.0 and switched from postcss-nested to postcss-nesting (BREAKING CHANGE)
- Disable polyfill for CSS custom properties.
- Removed wordpress/jest-preset-default and now shipping a custom jest config. Jest has also been updated to the latest version.

## 1.0.13

- [Security] Updated deps

## 1.0.12

- Fixed: BrowserSync Config
- Fixed: webpack watch command
- Updated deps

## 1.0.11

- Fixed: Allows passing a `--port` flag to browser-sync `wdc-toolkit start|watch --port=3002`
- Fixed: dev-server public path

## 1.0.10

- Fixed empty scripts output when a CSS entry is added.

## 1.0.9

- Updated deps
- Remove husky from wdc-toolkit [81] (Updated: Husky to 6.x)

## 1.0.8

- Fixed PostCSS nested plugin. props @rdimascio
- Fixed: Typo in HtmlWebpackPlugin where it was looking for the template in pulic folder instead of folder. Additionally, it now only defines a custom template if it is defined in the project.

## 1.0.7

- Fixed: Babel error when running jest.
- Added: Webpack Dev Server

## 1.0.6

- Fixed: webpack externals definitions

## 1.0.5

- Fixed: Regex in asset/resources.
- Fixed: Babel transpilation for publishing packages `["sourceType": "unambiguous"]`.
- Fixed: Webpack Externals definition
- Update: Prettier to 1.3.0 and stop using version range.
- Added: Support for CSS Modules.

## 1.0.4

- Exit with an error code if build fails

## 1.0.3

- Update @wdcthemes/eslint-config to 2.3.5
- Update @wdcthemes/babel-preset-defaylt to 1.1.2
- Add TypeScript support

## 1.0.2

- Update @wdcthemes/stylelint-config to 1.1.1

## 1.0.1

- Adds cache busting to chunk files generated via Webpack code splitting.
- Added support for SCSS and Sass files.

## 1.0.0

- Adds support for authoring libraries.

## Pre wdc-toolkit

## 1.3.4

- Deprecate wdc-scripts command and exposes a new wdc-toolkit command.

## 1.3.3

- Disables webpack css-loader url resolution
- Only load and run the postcss-editor-styles plugin when processing editor-style.css

## 1.3.2

- Fixes a bug where webpack was not targeting the same browsers as babel, causing code to not run on older browsers like IE 11.
- Updates eslint to 2.3.4 to address
- Updates postcss.config.js to include missing packages and to fix a bug where editor styles wasn't being wrapped with the `.editor-styles-wrapper` class.
